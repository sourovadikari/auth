(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,s)=>{r.exports=e.r(76562)},7426,e=>{"use strict";e.s(["default",()=>h]);var r=e.i(43476),s=e.i(71645),t=e.i(17255),i=e.i(18566),a=e.i(53145),n=e.i(81307),l=e.i(94814),o=e.i(22016),c=e.i(67881),d=e.i(74946),u=e.i(23750),m=e.i(50682);let x=n.z.object({identifier:n.z.string().min(3,"Email or username must be at least 3 characters"),password:n.z.string().min(6,"Password must be at least 6 characters")});function h(){let e=(0,i.useRouter)(),n=(0,i.useSearchParams)(),[h,f]=(0,s.useState)(!1),[b,g]=(0,s.useState)(!1),[p,j]=(0,s.useState)(""),[w,y]=(0,s.useState)(!1),[v,N]=(0,s.useState)(""),[S,F]=(0,s.useState)(""),k=n.get("callbackUrl")||"/",C=(0,a.useForm)({resolver:(0,l.zodResolver)(x),defaultValues:{identifier:"",password:""}});async function z(r){f(!0),j("");try{let s=await (0,t.signIn)("credentials",{identifier:r.identifier,password:r.password,redirect:!1});(null==s?void 0:s.error)?s.error.includes("Please verify your email")?(N("Email Not Verified"),F("We've sent you a new verification link. Please check your inbox."),y(!0)):j(s.error):(null==s?void 0:s.ok)&&(j(""),e.push(k),e.refresh())}catch(e){console.error("Sign in unexpected error:",e),j("Something went wrong. Please try again.")}finally{f(!1)}}async function P(){g(!0);try{await (0,t.signIn)("github",{callbackUrl:k})}catch(e){console.error("GitHub sign in error:",e),g(!1)}}return(0,s.useEffect)(()=>{let e=C.watch(()=>{p&&j("")});return()=>e.unsubscribe()},[C,p]),(0,s.useEffect)(()=>{!async function(){await (0,t.getSession)()&&e.push(k)}()},[k,e]),(0,r.jsxs)("div",{className:"max-w-lg mx-auto p-8 bg-white dark:bg-zinc-900 rounded-2xl shadow-xl",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-center text-gray-900 dark:text-white mb-8",children:"Welcome Back"}),p&&(0,r.jsx)("div",{className:"mb-4 p-3 rounded-md bg-red-100 text-red-700 text-sm border border-red-200",children:p}),(0,r.jsx)(d.Form,{...C,children:(0,r.jsxs)("form",{onSubmit:C.handleSubmit(z),noValidate:!0,className:"space-y-6",children:[(0,r.jsx)(d.FormField,{control:C.control,name:"identifier",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Email or Username"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(u.Input,{...s,type:"text",placeholder:"Enter your email or username",disabled:h||b,autoComplete:"username"})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:C.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"Password"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(u.Input,{...s,type:"password",placeholder:"Enter your password",disabled:h||b,autoComplete:"current-password"})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)(o.default,{href:"/forgot-password",className:"text-sm text-primary underline",children:"Forgot your password?"})}),(0,r.jsx)(c.Button,{type:"submit",className:"w-full",disabled:h||b,children:h?"Signing in...":"Sign In"})]})}),(0,r.jsxs)("div",{className:"relative my-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"bg-white dark:bg-zinc-900 px-2 text-gray-500",children:"or"})})]}),(0,r.jsxs)(c.Button,{variant:"outline",className:"w-full flex items-center justify-center gap-2",onClick:P,disabled:h||b,children:[(0,r.jsx)(m.Github,{className:"w-5 h-5"}),b?"Connecting...":"Continue with GitHub"]}),(0,r.jsxs)("p",{className:"mt-6 text-center text-sm text-muted-foreground",children:["Donâ€™t have an account?"," ",(0,r.jsx)(o.default,{href:"/signup",className:"text-primary underline",children:"Sign Up"})]}),w&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-xl max-w-md w-full p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:v}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6",children:S}),(0,r.jsx)(c.Button,{onClick:()=>y(!1),className:"w-full",children:"Close"})]})})]})}}]);