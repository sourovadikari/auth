module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},24836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},92509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},6461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},49719,(a,b,c)=>{b.exports=a.x("assert",()=>require("assert"))},4650,16201,a=>{"use strict";a.s(["default",()=>c],4650);var b=a.i(70106);let c=(0,b.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["CheckCircle",()=>d],16201);let d=(0,b.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},50944,(a,b,c)=>{b.exports=a.r(74137)},77387,a=>{"use strict";a.s(["StatusMessage",()=>i],77387);var b=a.i(87924),c=a.i(4650),c=c,d=a.i(16201),e=a.i(70106);let f=(0,e.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),g=(0,e.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var h=a.i(40695);function i({status:a,message:e,countdown:i,onActionClick:j,actionLabel:k,className:l=""}){return(0,b.jsxs)("div",{className:`max-w-md mx-auto p-8 text-center border rounded-lg shadow-sm
        ${"success"===a?"border-green-300 dark:border-green-700 bg-green-50 dark:bg-green-900":"error"===a?"border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-900":"loading"===a?"border-blue-300 dark:border-blue-700 bg-blue-50 dark:bg-blue-900":"border-gray-300 dark:border-gray-700 bg-white dark:bg-zinc-900"}
        ${l}`,children:[(()=>{let e={className:"w-10 h-10 mx-auto mb-3"};switch(a){case"loading":return(0,b.jsx)(c.default,{...e,className:`${e.className} animate-spin text-blue-500`});case"success":return(0,b.jsx)(d.CheckCircle,{...e,className:`${e.className} text-green-500`});case"error":return(0,b.jsx)(f,{...e,className:`${e.className} text-red-500`});default:return(0,b.jsx)(g,{...e,className:`${e.className} text-gray-500`})}})(),(0,b.jsx)("p",{className:`mb-2 font-medium ${(()=>{switch(a){case"loading":return"text-blue-600 dark:text-blue-400";case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-300"}})()}`,children:e}),"number"==typeof i&&i>0&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Redirecting in ",i," second",1!==i?"s":"","..."]}),j&&k&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(h.Button,{variant:"outline",onClick:j,children:k})})]})}},92952,a=>{"use strict";a.s(["default",()=>l]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(83490),f=a.i(95245),g=a.i(77387),h=a.i(40695),i=a.i(5522),j=a.i(58213);function k(){let a=(0,d.useRouter)(),k=(0,d.useSearchParams)(),l=k.get("email"),m=k.get("token"),[n,o]=(0,c.useState)("verifying"),[p,q]=(0,c.useState)("Verifying reset token..."),[r,s]=(0,c.useState)(5),[t,u]=(0,c.useState)(null),v=(0,f.useForm)({defaultValues:{password:"",confirmPassword:""}}),w="verifying"===n||"submitting"===n,x="invalid"===n||"error"===n,y="success"===n,z="submitting"===n;async function A(a){if(!l||!m){o("error"),q("Missing email or token.");return}o("submitting"),q("Updating your password..."),u(null);try{await e.default.post("/api/auth/reset-password",{email:l,token:m,password:a.password,action:"reset"}),o("success"),q("Password updated successfully! Redirecting to login...")}catch(b){let a=b.response?.data?.error||"Failed to reset password.";a.toLowerCase().includes("password cannot be the same")?(u(a),o("valid")):(o("error"),q(a))}}return((0,c.useEffect)(()=>{if(!l||!m){o("invalid"),q("Invalid reset link.");return}!async function(){try{let a=await e.default.post("/api/auth/reset-password",{email:l,token:m,action:"verify"});a.data.valid?o("valid"):(o("invalid"),q(a.data.message||"Reset link is invalid or expired."))}catch(a){o("invalid"),q(a.response?.data?.error||"Failed to verify token.")}}()},[l,m]),(0,c.useEffect)(()=>{if("success"===n){if(r<=0)return void a.push("/signin");let b=setTimeout(()=>{s(a=>a-1)},1e3);return()=>clearTimeout(b)}},[n,r,a]),(0,c.useEffect)(()=>{let a=v.watch(()=>{t&&u(null)});return()=>a.unsubscribe()},[v,t]),w)?(0,b.jsx)(g.StatusMessage,{status:"loading",message:p}):x?(0,b.jsx)(g.StatusMessage,{status:"error",message:p,actionLabel:"Request New Reset Link",onActionClick:()=>a.push("/forgot-password")}):y?(0,b.jsx)(g.StatusMessage,{status:"success",message:p,countdown:r}):(0,b.jsxs)("div",{className:"max-w-lg mx-auto p-8 bg-white dark:bg-zinc-900 rounded-2xl shadow-xl",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-center mb-4",children:"Set New Password"}),(0,b.jsxs)("p",{className:"text-center text-gray-500 dark:text-gray-300 mb-6",children:["For: ",(0,b.jsx)("strong",{children:l})]}),t&&(0,b.jsx)("div",{className:"mb-6 text-center text-red-600 dark:text-red-400 font-semibold border border-red-400 dark:border-red-700 bg-red-100 dark:bg-red-900/30 px-4 py-3 rounded-md",children:t}),(0,b.jsx)(j.Form,{...v,children:(0,b.jsxs)("form",{onSubmit:v.handleSubmit(A),className:"space-y-6",children:[(0,b.jsx)(j.FormField,{control:v.control,name:"password",rules:{required:"Password is required",minLength:{value:6,message:"Minimum 6 characters"}},render:({field:a,fieldState:c})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"New Password"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(i.Input,{type:"password",...a,disabled:z})}),(0,b.jsx)(j.FormMessage,{children:c.error?.message})]})}),(0,b.jsx)(j.FormField,{control:v.control,name:"confirmPassword",rules:{required:"Please confirm your password",validate:a=>a===v.getValues("password")||"Passwords do not match"},render:({field:a,fieldState:c})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"Confirm Password"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(i.Input,{type:"password",...a,disabled:z})}),(0,b.jsx)(j.FormMessage,{children:c.error?.message})]})}),(0,b.jsx)(h.Button,{type:"submit",className:"w-full",disabled:z,children:z?"Updating...":"Update Password"})]})}),(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsx)(h.Button,{variant:"link",onClick:()=>a.push("/signin"),className:"text-primary underline",disabled:z,children:"Back to Sign In"})})]})}function l(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading form..."}),children:(0,b.jsx)(k,{})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5441a594._.js.map