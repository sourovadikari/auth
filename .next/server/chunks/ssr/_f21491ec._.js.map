{"version":3,"sources":["turbopack:///[project]/node_modules/next/navigation.js","turbopack:///[project]/app/(auth)/signin/SignInClient.tsx"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n","\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { signIn, getSession } from \"next-auth/react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport Link from \"next/link\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Github } from \"lucide-react\";\r\n\r\n// Schema\r\nconst signinSchema = z.object({\r\n  identifier: z.string().min(3, \"Email or username must be at least 3 characters\"),\r\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\r\n});\r\ntype SigninFormInputs = z.infer<typeof signinSchema>;\r\n\r\nexport default function SignInClient() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isGitHubLoading, setIsGitHubLoading] = useState(false);\r\n\r\n  const [inlineError, setInlineError] = useState(\"\");\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalTitle, setModalTitle] = useState(\"\");\r\n  const [modalMessage, setModalMessage] = useState(\"\");\r\n\r\n  const callbackUrl = searchParams.get(\"callbackUrl\") || \"/\";\r\n\r\n  const form = useForm<SigninFormInputs>({\r\n    resolver: zodResolver(signinSchema),\r\n    defaultValues: {\r\n      identifier: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  // Clear error when user types\r\n  useEffect(() => {\r\n    const subscription = form.watch(() => {\r\n      if (inlineError) setInlineError(\"\");\r\n    });\r\n    return () => subscription.unsubscribe();\r\n  }, [form, inlineError]);\r\n\r\n  useEffect(() => {\r\n    async function checkSession() {\r\n      const session = await getSession();\r\n      if (session) {\r\n        router.push(callbackUrl);\r\n      }\r\n    }\r\n    checkSession();\r\n  }, [callbackUrl, router]);\r\n\r\n  async function onSubmit(data: SigninFormInputs) {\r\n    setIsLoading(true);\r\n    setInlineError(\"\");\r\n\r\n    try {\r\n      const result = await signIn(\"credentials\", {\r\n        identifier: data.identifier,\r\n        password: data.password,\r\n        redirect: false,\r\n      });\r\n\r\n      if (result?.error) {\r\n        if (result.error.includes(\"Please verify your email\")) {\r\n          setModalTitle(\"Email Not Verified\");\r\n          setModalMessage(\"We've sent you a new verification link. Please check your inbox.\");\r\n          setModalOpen(true);\r\n        } else {\r\n          setInlineError(result.error);\r\n        }\r\n      } else if (result?.ok) {\r\n        setInlineError(\"\");\r\n        router.push(callbackUrl);\r\n        router.refresh();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Sign in unexpected error:\", error);\r\n      setInlineError(\"Something went wrong. Please try again.\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleGitHubSignIn() {\r\n    setIsGitHubLoading(true);\r\n    try {\r\n      await signIn(\"github\", { callbackUrl });\r\n    } catch (error) {\r\n      console.error(\"GitHub sign in error:\", error);\r\n      setIsGitHubLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-lg mx-auto p-8 bg-white dark:bg-zinc-900 rounded-2xl shadow-xl\">\r\n      <h1 className=\"text-4xl font-bold text-center text-gray-900 dark:text-white mb-8\">\r\n        Welcome Back\r\n      </h1>\r\n\r\n      {/* Inline Error */}\r\n      {inlineError && (\r\n        <div className=\"mb-4 p-3 rounded-md bg-red-100 text-red-700 text-sm border border-red-200\">\r\n          {inlineError}\r\n        </div>\r\n      )}\r\n\r\n      <Form {...form}>\r\n        <form onSubmit={form.handleSubmit(onSubmit)} noValidate className=\"space-y-6\">\r\n          <FormField\r\n            control={form.control}\r\n            name=\"identifier\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Email or Username</FormLabel>\r\n                <FormControl>\r\n                  <Input\r\n                    {...field}\r\n                    type=\"text\"\r\n                    placeholder=\"Enter your email or username\"\r\n                    disabled={isLoading || isGitHubLoading}\r\n                    autoComplete=\"username\"\r\n                  />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <FormField\r\n            control={form.control}\r\n            name=\"password\"\r\n            render={({ field }) => (\r\n              <FormItem>\r\n                <FormLabel>Password</FormLabel>\r\n                <FormControl>\r\n                  <Input\r\n                    {...field}\r\n                    type=\"password\"\r\n                    placeholder=\"Enter your password\"\r\n                    disabled={isLoading || isGitHubLoading}\r\n                    autoComplete=\"current-password\"\r\n                  />\r\n                </FormControl>\r\n                <FormMessage />\r\n              </FormItem>\r\n            )}\r\n          />\r\n\r\n          <div className=\"text-right\">\r\n            <Link href=\"/forgot-password\" className=\"text-sm text-primary underline\">\r\n              Forgot your password?\r\n            </Link>\r\n          </div>\r\n\r\n          <Button type=\"submit\" className=\"w-full\" disabled={isLoading || isGitHubLoading}>\r\n            {isLoading ? \"Signing in...\" : \"Sign In\"}\r\n          </Button>\r\n        </form>\r\n      </Form>\r\n\r\n      <div className=\"relative my-6\">\r\n        <div className=\"absolute inset-0 flex items-center\">\r\n          <div className=\"w-full border-t\" />\r\n        </div>\r\n        <div className=\"relative flex justify-center text-sm\">\r\n          <span className=\"bg-white dark:bg-zinc-900 px-2 text-gray-500\">or</span>\r\n        </div>\r\n      </div>\r\n\r\n      <Button\r\n        variant=\"outline\"\r\n        className=\"w-full flex items-center justify-center gap-2\"\r\n        onClick={handleGitHubSignIn}\r\n        disabled={isLoading || isGitHubLoading}\r\n      >\r\n        <Github className=\"w-5 h-5\" />\r\n        {isGitHubLoading ? \"Connecting...\" : \"Continue with GitHub\"}\r\n      </Button>\r\n\r\n      <p className=\"mt-6 text-center text-sm text-muted-foreground\">\r\n        Donâ€™t have an account?{\" \"}\r\n        <Link href=\"/signup\" className=\"text-primary underline\">\r\n          Sign Up\r\n        </Link>\r\n      </p>\r\n\r\n      {/* Modal for Email Verification Only */}\r\n      {modalOpen && (\r\n        <div className=\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center px-4\">\r\n          <div className=\"bg-white dark:bg-zinc-900 rounded-lg shadow-xl max-w-md w-full p-6\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">{modalTitle}</h2>\r\n            <p className=\"text-sm text-gray-600 dark:text-gray-300 mb-6\">{modalMessage}</p>\r\n            <Button onClick={() => setModalOpen(false)} className=\"w-full\">\r\n              Close\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}