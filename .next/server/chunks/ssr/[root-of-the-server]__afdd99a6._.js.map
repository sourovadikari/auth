{"version":3,"sources":["turbopack:///[project]/app/(auth)/forgot-password/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport axios, { AxiosError } from \"axios\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\n\r\ntype FormValues = {\r\n  identifier: string;\r\n};\r\n\r\nexport default function ForgotPasswordPage() {\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n  const [popupMessage, setPopupMessage] = useState<string>(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const form = useForm<FormValues>({\r\n    defaultValues: {\r\n      identifier: \"\",\r\n    },\r\n  });\r\n\r\n  async function sendResetLink(identifier: string) {\r\n    setPopupOpen(false);\r\n    setPopupMessage(\"\");\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post(\"/api/auth/forgot-password\", {\r\n        identifier,\r\n      });\r\n\r\n      setPopupMessage(response.data.message || \"Verification link sent successfully. Please check your email.\");\r\n      setPopupOpen(true);\r\n      form.reset();\r\n    } catch (error: unknown) {\r\n      const err = error as AxiosError<{ error: string }>;\r\n      setPopupMessage(err.response?.data?.error || err.message || \"An error occurred.\");\r\n      setPopupOpen(true);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async function onSubmit(data: FormValues) {\r\n    await sendResetLink(data.identifier);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"max-w-md mx-auto p-6\">\r\n        <h1 className=\"mb-6 text-center text-3xl font-semibold\">Forgot Password</h1>\r\n\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} noValidate>\r\n            <FormField\r\n              control={form.control}\r\n              name=\"identifier\"\r\n              rules={{ required: \"Email or username is required\" }}\r\n              render={({ field, fieldState }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email or Username</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      {...field}\r\n                      type=\"text\"\r\n                      placeholder=\"Enter your email or username\"\r\n                      autoComplete=\"username\"\r\n                      disabled={isLoading}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage>{fieldState.error?.message}</FormMessage>\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <Button type=\"submit\" className=\"mt-6 w-full\" disabled={isLoading}>\r\n              {isLoading ? \"Sending...\" : \"Send Verification Link\"}\r\n            </Button>\r\n          </form>\r\n        </Form>\r\n      </div>\r\n\r\n      {/* Manual popup */}\r\n      {popupOpen && (\r\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n          <div className=\"bg-white dark:bg-zinc-900 rounded-lg p-6 max-w-sm w-full shadow-lg\">\r\n            <p>{popupMessage}</p>\r\n            <div className=\"mt-4 flex justify-end\">\r\n              <Button onClick={() => setPopupOpen(false)}>Close</Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"0xBAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAQA,EAAA,EAAA,CAAA,CAAA,MAMe,SAAS,IACtB,GAAM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACrC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACnD,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAErC,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,EAAa,CAC/B,cAAe,CACb,WAAY,EACd,CACF,GAEA,eAAe,EAAc,CAAkB,EAC7C,GAAa,GACb,EAAgB,IAChB,GAAa,GAEb,GAAI,CACF,IAAM,EAAW,MAAM,EAAA,OAAK,CAAC,IAAI,CAAC,4BAA6B,CAC7D,YACF,GAEA,EAAgB,EAAS,IAAI,CAAC,OAAO,EAAI,iEACzC,GAAa,GACb,EAAK,KAAK,EACZ,CAAE,MAAO,EAAgB,CAEvB,EAAgB,EAAI,QAAQ,EAAE,MAAM,OAAS,AADjC,EACqC,OAAO,EAAI,sBAC5D,GAAa,EACf,QAAU,CACR,GAAa,EACf,CACF,CAEA,eAAe,EAAS,CAAgB,EACtC,MAAM,EAAc,EAAK,UAAU,CACrC,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mDAA0C,oBAExD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAE,GAAG,CAAI,UACZ,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAK,YAAY,CAAC,GAAW,UAAU,CAAA,CAAA,YACrD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACR,QAAS,EAAK,OAAO,CACrB,KAAK,aACL,MAAO,CAAE,SAAU,+BAAgC,EACnD,OAAQ,CAAC,OAAE,CAAK,YAAE,CAAU,CAAE,GAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACH,GAAG,CAAK,CACT,KAAK,OACL,YAAY,+BACZ,aAAa,WACb,SAAU,MAGd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UAAE,EAAW,KAAK,EAAE,eAKtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,UAAU,cAAc,SAAU,WACrD,EAAY,aAAe,mCAOnC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sFACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,IACJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,IAAM,GAAa,YAAQ,mBAO1D"}